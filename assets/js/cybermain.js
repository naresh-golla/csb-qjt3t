"use strict";$("document").ready(function(){Header.init(),HeroCarousel.init(),MediaCarousel.init(),ArticleListing.init(),Search.init(),Forms.init(),StickyNav.init()});var ArticleListing=function(n){return{init:function(){n(".articleListing").each(function(e,t){n(t).find(".articleListing_itemDescription").each(function(e,t){n(t).text(n(t).text())})}),n(".burger-button").click(function(){n(".burger-button").hide(),n(".close-button").show(),n(".navigation-item-wrapper").animate({maxHeight:200,opacity:1},500,"linear")}),n(".close-button").click(function(){n(".burger-button").show(),n(".close-button").hide(),n(".navigation-item-wrapper").animate({maxHeight:0,opacity:0},500,"linear")})}}}(jQuery),Contact=function(e){return{init:function(){e("[data-hero-carousel]").each(function(e,t){var n=_getIdOfSlider(t);new Glide("#".concat(n),{perView:1,autoplay:3e3,type:"carousel"}).mount()})}}}(jQuery),Forms=function(i){var n=function(){var n=i("form#newsletter-subscription");i.post(n.attr("action"),n.serialize()).done(function(e,t){n.hide(),i("success"===t&&0<e.indexOf("thank-you")?".success":".error").show()})};return{init:function(){i("form#newsletter-subscription a").click(function(e){e.preventDefault(),i(".error").hide(),i(".erroremail").hide(),i(".success").hide(),i.ajax({url:"/api/duff/contact/current",success:function(r){var e=i("form#newsletter-subscription");0<e.length&&i(e).each(function(e,t){if(i(t).find("#sitecoreContactID1").length<1){var n=document.createElement("input");n.id="sitecoreContactID1",n.type="hidden",n.name="sitecoreContactID1",n.value=r.id,i(t).prepend(n)}else i(t).find("#sitecoreContactID1").each(function(e,t){t.value=r.id})});var t=i("form#newsletter-subscription input[type=email]");return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.val())?(t.css("border","0"),n()):(t.css("border","solid 1px red"),i(".erroremail").show()),!1}})})}}}(jQuery),Header=function(t){return{init:function(){t(".burger-button").click(function(){t("body").addClass("u-of-hidden"),t(".burger-button").hide(),t(".close-button").show();var e=t(window).height()+200;t(".headerwrapper").animate({maxHeight:e},500,"linear"),t(".navigation-item-wrapper").animate({maxHeight:200,opacity:1},500,"linear")}),t(".close-button").click(function(){t("body").removeClass("u-of-hidden"),t(".burger-button").show(),t(".close-button").hide();var e=t("body").hasClass("scrolled")?75:110;t(".headerwrapper").animate({maxHeight:e},500,"linear"),t(".navigation-item-wrapper").animate({maxHeight:0,opacity:0},500,"linear"),setTimeout(function(){t(".headerwrapper").css("max-height","")},600)})}}}(jQuery),HeroCarousel=function(t){var r=function(e){return t(e).attr("id")};return{init:function(){t("[data-hero-carousel]").each(function(e,t){var n=r(t);new Glide("#".concat(n),{perView:1,autoplay:3e3,type:"carousel"}).mount()})}}}(jQuery),MediaCarousel=function(r){var i=function(e){r(e).find(".glide__slide").each(function(e,t){n(t),o(t),h(t)})},a=function(e){return r(e).attr("id")},n=function(e){r(e).mouseenter(function(e){t(e.currentTarget),c(e.currentTarget),l()})},o=function(e){r(e).mouseleave(function(e){s(e.currentTarget),u(e.currentTarget),d()})},t=function(e){var t=.1*parseFloat(e.style.width);r(e).prevAll().css("transform","translate3d(-".concat(t,"px, 0, 0)"))},c=function(e){var t=.1*parseFloat(e.style.width);r(e).nextAll().css("transform","translate3d(".concat(t,"px, 0, 0)"))},u=function(e){r(e).nextAll().css("transform","")},s=function(e){r(e).prevAll().css("transform","")},l=function(){r(".MediaCarousel .bulletsWrapper").addClass("u-zIndex--1")},d=function(){r(".MediaCarousel .bulletsWrapper").removeClass("u-zIndex--1")},f=function(e){new Glide("#".concat(e),{type:"carousel",focusAt:"center",startAt:0,perView:4,breakpoints:{600:{perView:1,peek:{before:50,after:50}},1200:{perView:2,peek:{before:50,after:50}}}}).mount()},h=function(e){r(e).find("[data-media-carousel-descripion]").each(function(e,t){var n=p(r(t).text());r(t).text(n)})},p=function(e){var t=e.split(" ");return 16<t.length?"".concat(t.slice(0,16).join(" "),"..."):e};return{init:function(){r("[data-media-carousel]").each(function(e,t){var n=a(t);f(n),i(t)})}}}(jQuery),Search=function(r){var i=function(e,t){r("#errorMessageTemplate").hide(),r("#target").hide(),r("#skeleton").show(),r.post("/api/duff/cyber/articlelisting",{query:e,category:t}).done(function(e,t){n(e)})},n=function(e){if(console.log(e),e.rssFeedchild.length<1)return r("#skeleton").hide(),void r("#errorMessageTemplate").show();var t=r("#template").html();Mustache.parse(t);var n=Mustache.render(t,e);r("#target").html(n),r("#skeleton").hide(),r("#target").show()};return{init:function(){var t,n;n=t="","Search"===(t=r("[data-category]").attr("data-category"))&&(t="",n=window.location.search.replace("?query=",""),r(".search_input").val(decodeURIComponent(n)),i(n,t)),t&&"Search"!==t&&i(n,t),r(".search_button").on("click",function(e){e.preventDefault(),n=r(".search_input").val(),r("[data-category]").length<1?window.location.href="/Search Listing?query="+n:i(n,t)}),r(".search_input").keypress(function(e){if(13==e.which)return r(".search_button").click(),!1})}}}(jQuery),StickyNav=function(r){return{init:function(){var n=r("header").height()-75;r(window).scroll(function(){var e=r(window).scrollTop();if(e<n){var t="-"+e+"px";r(".headerwrapper").css("background-position-y",t)}50<=e?r("body").addClass("scrolled"):r("body").removeClass("scrolled")})}}}(jQuery);